---
title: React-ржП State Update Queue ржХрж░рж╛
---

# ЁЯФД React-ржП State Update Queue ржХрж░рж╛

> **React ржПржХрж╕рж╛ржерзЗ ржЕржирзЗржХржЧрзБрж▓рзЛ state update ржХрж░рзЗ (batch ржХрж░рзЗ), ржпрж╛рждрзЗ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржк ржжрзНрж░рзБржд ржУ ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржп рж╣ржпрж╝!**

---

## ЁЯЯв ржПржХржжржо ржирждрзБржиржжрзЗрж░ ржЬржирзНржп: "Queueing State" ржорж╛ржирзЗ ржХрзА?

ржнрж╛ржмрзБржи, ржЖржкржирж┐ ржлрж╛рж╕рзНржЯ-ржлрзБржб рж░рзЗрж╕рзНржЯрзБрж░рзЗржирзНржЯрзЗ ржЧрзЗржЫрзЗржиред ржЖржкржирж┐ ржмрж╛рж░рзНржЧрж╛рж░, ржлрзНрж░рж╛ржЗ, ржЖрж░ ржбрзНрж░рж┐ржЩрзНржХ ржЕрж░рзНржбрж╛рж░ ржжрж┐рж▓рзЗржиред ржХрзНржпрж╛рж╢рж┐ржпрж╝рж╛рж░ ржЖржкржирж╛рж░ ржкрзБрж░рзЛ ржЕрж░рзНржбрж╛рж░ рж▓рж┐ржЦрзЗ рж░рж╛ржЦрзЗ, рждрж╛рж░ржкрж░ ржПржХрж╕рж╛ржерзЗ ржХрж┐ржЪрзЗржирзЗ ржкрж╛ржарж╛ржпрж╝ред ржХрж┐ржЪрзЗржи рж░рж╛ржирзНржирж╛ рж╢рзБрж░рзБ ржХрж░рзЗ ржпржЦржи ржЖржкржирж┐ ржЕрж░рзНржбрж╛рж░ рж╢рзЗрж╖ ржХрж░рзЗржиред

**React-ржП, ржЖржкржирж┐ ржпржЦржи ржПржХрзЗрж░ ржкрж░ ржПржХ state ржЖржкржбрзЗржЯ ржХрж░рзЗржи, React ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзЗ (ржХрзНржпрж╛рж╢рж┐ржпрж╝рж╛рж░рзЗрж░ ржорждрзЛ) ржПржмржВ рж╕ржм ржЖржкржбрзЗржЯ ржПржХрж╕рж╛ржерзЗ ржХрж░рзЗред**

---

## ЁЯОп ржЖржкржирж┐ ржХрзА рж╢рж┐ржЦржмрзЗржи

- Batching ржХрзА ржПржмржВ React ржХрзАржнрж╛ржмрзЗ ржПржЯрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ
- ржХрзАржнрж╛ржмрзЗ ржПржХрж╛ржзрж┐ржХржмрж╛рж░ state ржЖржкржбрзЗржЯ ржХрж░ржмрзЗржи, render рж╣ржУржпрж╝рж╛рж░ ржЖржЧрзЗ
- рж╕рж░рж╛рж╕рж░рж┐ ржорж╛ржи ржЖржкржбрзЗржЯ ржЖрж░ updater ржлрж╛ржВрж╢ржирзЗрж░ ржкрж╛рж░рзНржержХрзНржп
- State queue ржирж┐ржпрж╝рзЗ рж╕рж╛ржзрж╛рж░ржг ржнрзБрж▓ ржХрзАржнрж╛ржмрзЗ ржПржбрж╝рж╛ржмрзЗржи

---

## рзз. Batching ржХрзА? (ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ)

- ржЖржкржирж┐ ржпржЦржи setState (ржпрзЗржоржи setCount) ржХрж▓ ржХрж░рзЗржи, React рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ рж╕рзНржХрзНрж░рж┐ржи ржЖржкржбрзЗржЯ ржХрж░рзЗ ржирж╛ред
- ржмрж░ржВ, ржЖржкржирж╛рж░ ржлрж╛ржВрж╢ржи рж╢рзЗрж╖ рж╣ржУржпрж╝рж╛ ржкрж░рзНржпржирзНржд ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзЗ, рждрж╛рж░ржкрж░ рж╕ржм ржЖржкржбрзЗржЯ ржПржХрж╕рж╛ржерзЗ ржХрж░рзЗред
- ржПржХрзЗ ржмрж▓рзЗ **batching**ред

**ржХрзЗржи?**
- ржПрждрзЗ ржЕрзНржпрж╛ржк ржжрзНрж░рзБржд ржЪрж▓рзЗред
- UI-ржПрж░ ржХрзЛржирзЛ ржЕржВрж╢ ржнрзБрж▓ржнрж╛ржмрзЗ ржЖржкржбрзЗржЯ рж╣ржУржпрж╝рж╛ ржПржбрж╝рж╛ржирзЛ ржпрж╛ржпрж╝ред

**ржЙржжрж╛рж╣рж░ржг:**
- ржУржпрж╝рзЗржЯрж╛рж░ ржкрзБрж░рзЛ ржЕрж░рзНржбрж╛рж░ ржирж┐ржпрж╝рзЗ ржХрж┐ржЪрзЗржирзЗ ржпрж╛ржпрж╝, ржПржХржмрж╛рж░рзЗред

---

## рзи. ржПржХрж╛ржзрж┐ржХржмрж╛рж░ State ржЖржкржбрзЗржЯ ржХрж░рж▓рзЗ ржХрзА рж╣ржпрж╝?

ржзрж░рж╛ ржпрж╛ржХ, ржЖржкржирж┐ ржПржХржЯрж┐ ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ рзй ржпрзЛржЧ ржХрж░рждрзЗ ржЪрж╛ржи:

```jsx
<button onClick={() => {
  setNumber(number + 1);
  setNumber(number + 1);
  setNumber(number + 1);
}}>+3</button>
```

**ржЖржкржирж╛рж░ ржХрзА ржоржирзЗ рж╣ржпрж╝?**
- ржоржирзЗ рж╣рждрзЗ ржкрж╛рж░рзЗ рж╕ржВржЦрзНржпрж╛ рзй ржмрж╛ржбрж╝ржмрзЗред
- **ржХрж┐ржирзНрждрзБ ржЖрж╕рж▓рзЗ ржмрж╛ржбрж╝ржмрзЗ рзз!**

**ржХрзЗржи?**
- ржкрзНрж░рждрж┐ржЯрж┐ setNumber ржПржХржЗ ржорж╛ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ (ржлрж╛ржВрж╢ржирзЗрж░ рж╢рзБрж░рзБрждрзЗ ржпрзЗржЯрж╛ ржЫрж┐рж▓)ред
- React ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзЗ, рждрж╛рж░ржкрж░ ржПржХржмрж╛рж░рзЗржЗ ржЖржкржбрзЗржЯ ржХрж░рзЗред

> **рж╕рж╛ржзрж╛рж░ржг ржнрзБрж▓:** ржнрж╛ржмрж╛ рж╣ржпрж╝, ржкрзНрж░рждрж┐ржЯрж┐ setNumber ржирждрзБржи ржорж╛ржи ржирзЗржмрзЗред ржЖрж╕рж▓рзЗ ржирзЗржпрж╝ ржирж╛!

---

## рзй. рж╕рждрзНржпрж┐ржЗ ржПржХрж╛ржзрж┐ржХржмрж╛рж░ State ржЖржкржбрзЗржЯ ржХрж░ржмрзЗржи ржХрзАржнрж╛ржмрзЗ: Updater Function

ржкрзНрж░рждрж┐ржЯрж┐ ржЖржкржбрзЗржЯ ржпрзЗржи рж╕рж░рзНржмрж╢рзЗрж╖ ржорж╛ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ, рждрж╛рж░ ржЬржирзНржп setNumber-ржП ржлрж╛ржВрж╢ржи ржжрж┐ржи:

```jsx
<button onClick={() => {
  setNumber(n => n + 1);
  setNumber(n => n + 1);
  setNumber(n => n + 1);
}}>+3</button>
```

**ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?**
- ржкрзНрж░рждрж┐ржЯрж┐ setNumber(n => n + 1) queue ржерзЗржХрзЗ рж╕рж░рзНржмрж╢рзЗрж╖ ржорж╛ржи ржирзЗржпрж╝ред
- рждрж╛ржЗ рж╕ржВржЦрзНржпрж╛ рзй ржмрж╛ржбрж╝рзЗ, ржпрзЗржоржи ржЖржкржирж┐ ржЪрж╛ржи!

**ржЙржжрж╛рж╣рж░ржг:**
- ржХрзНржпрж╛рж╢рж┐ржпрж╝рж╛рж░ржХрзЗ рждрж┐ржиржмрж╛рж░ ржмрж▓рж▓рзЗржи, "рзз ржпрзЛржЧ ржХрж░рзЛ"ред ржХрзНржпрж╛рж╢рж┐ржпрж╝рж╛рж░ рж╕ржм ржпрзЛржЧ ржХрж░рзЗ ржХрж┐ржЪрзЗржирзЗ ржкрж╛ржарж╛ржпрж╝ред

---

## рзк. ржнрж┐ржЬрзНржпрзБржпрж╝рж╛рж▓: React ржХрзАржнрж╛ржмрзЗ Queue ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ

| ржзрж╛ржк | Queue-рждрзЗ ржХрзА ржЖржЫрзЗ?         | ржорж╛ржи |
|-----|--------------------------|-----|
| рзз   | n => n + 1               | 0 тЖТ 1 |
| рзи   | n => n + 1               | 1 тЖТ 2 |
| рзй   | n => n + 1               | 2 тЖТ 3 |

рж╕ржм ржЖржкржбрзЗржЯ рж╢рзЗрж╖рзЗ, рж╕ржВржЦрзНржпрж╛ рж╣ржпрж╝ рзй!

---

## рзл. рж╕рж░рж╛рж╕рж░рж┐ ржорж╛ржи ржУ Updater Function ржорзЗрж╢рж╛рж▓рзЗ ржХрзА рж╣ржпрж╝?

ржпржжрж┐ рж╕рж░рж╛рж╕рж░рж┐ ржорж╛ржи ржУ updater function ржорзЗрж╢рж╛ржи, рж╢рзЗрж╖рзЗрж░ рж╕рж░рж╛рж╕рж░рж┐ ржорж╛ржиржЗ ржЪрзВржбрж╝рж╛ржирзНржд рж╣ржмрзЗ:

```jsx
<button onClick={() => {
  setNumber(number + 5); // рзл рж╕рзЗржЯ ржХрж░рзЗ
  setNumber(n => n + 1); // рзз ржпрзЛржЧ ржХрж░рзЗ
  setNumber(42);         // рзкрзи рж╕рзЗржЯ ржХрж░рзЗ
}}>Update</button>
```

- React рж╕ржм ржЖржкржбрзЗржЯ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ рж╢рзЗрж╖рзЗрж░ржЯрж╛ (рзкрзи) ржЪрзВржбрж╝рж╛ржирзНржд ржорж╛ржи рж╣ржпрж╝ред

> **ржЯрж┐ржк:** рж╕рж░рзНржмрж╢рзЗрж╖ ржорж╛ржирзЗрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ, рж╕ржмрж╕ржоржпрж╝ updater function ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи!

---

## ЁЯТб рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк ржУ ржЯрж┐ржкрж╕

- React ржЖржкржирж╛рж░ ржлрж╛ржВрж╢ржи рж╢рзЗрж╖ рж╣ржУржпрж╝рж╛ ржкрж░рзНржпржирзНржд ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзЗ, рждрж╛рж░ржкрж░ state ржЖржкржбрзЗржЯ (batching)ред
- ржПржХрж╛ржзрж┐ржХржмрж╛рж░ state ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ, updater function ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи: setNumber(n => n + 1)
- setNumber(number + 1) ржмрж╛рж░ржмрж╛рж░ ржжрж┐рж▓рзЗ, ржПржХржмрж╛рж░ржЗ ржХрж╛ржЬ ржХрж░ржмрзЗ!
- Updater function ржирж┐рж░рж╛ржкржж ржУ ржмрж╛рж░ржмрж╛рж░ ржЖржкржбрзЗржЯрзЗрж░ ржЬржирзНржп рж╕рзЗрж░рж╛ред

---

## ЁЯПЛя╕ПтАНтЩВя╕П ржЪрзНржпрж╛рж▓рзЗржЮрзНржЬ (рж╣рж┐ржирзНржЯрж╕рж╣!)

**ржкрж░рж┐рж╕рзНржерж┐рждрж┐:**
ржЖржкржирж┐ ржЪрж╛ржи, ржПржХржЯрж┐ ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ counter-ржП рзл ржпрзЛржЧ рж╣ржмрзЗ, ржпрждржмрж╛рж░ржЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ржмрж╛ ржпржд ржжрзНрж░рзБрждржЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред

**рж╣рж┐ржирзНржЯ:** updater function рзл ржмрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред

<details>
<summary>ржЙрждрзНрждрж░ ржжрзЗржЦрждрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи</summary>

```jsx
<button onClick={() => {
  setCount(c => c + 1);
  setCount(c => c + 1);
  setCount(c => c + 1);
  setCount(c => c + 1);
  setCount(c => c + 1);
}}>+5</button>
```

</details>

---

## ЁЯФЧ ржЖрж░ржУ ржЬрж╛ржирзБржи

- [React ржЕржлрж┐рж╕рж┐ржпрж╝рж╛рж▓ ржбржХрж╕: Queueing a Series of State Updates](https://react.dev/learn/queueing-a-series-of-state-updates)

---

рж╢рзБржн ржХрзЛржбрж┐ржВ! ЁЯЪА
