---
title: Queueing a Series of State Updates in React
---

# 🔄 Queueing a Series of State Updates in React

> **React batches state updates to make your app faster and more predictable!**

---

## 🟢 For Absolute Beginners: What Does "Queueing State" Mean?

Imagine you're in a fast-food restaurant. You order a burger, fries, and a drink. The cashier writes down your whole order, then sends it to the kitchen all at once. The kitchen starts cooking only after you finish ordering.

**In React, when you update state several times in a row, React waits until you're done (like the cashier) and then updates everything together.**

---

## 🎯 What You'll Learn

- What batching is and how React uses it
- How to update state multiple times before a re-render
- The difference between direct value updates and updater functions
- How to avoid common mistakes with state queues

---

## 1. What is Batching? (Step by Step)

- When you call setState (like setCount), React doesn't update the screen right away.
- Instead, it waits until your function finishes, then updates everything at once.
- This is called **batching**.

**Why?**
- It makes your app faster.
- It prevents weird bugs where only part of your UI updates.

**Analogy:**
- Like a waiter taking your whole order before going to the kitchen.

---

## 2. What Happens If You Update State Many Times in a Row?

Let's say you want to add 3 to a number when you click a button:

```jsx
<button onClick={() => {
  setNumber(number + 1);
  setNumber(number + 1);
  setNumber(number + 1);
}}>+3</button>
```

**What do you expect?**
- You might think the number will go up by 3.
- **But it only goes up by 1!**

**Why?**
- Each setNumber uses the same value (the value at the start of the function).
- React waits until you're done, then updates the number just once.

> **Common Mistake:** Thinking each setNumber will use the new value. It won't!

---

## 3. How to Really Update State Many Times: The Updater Function

To make sure each update uses the latest value, use a function inside setNumber:

```jsx
<button onClick={() => {
  setNumber(n => n + 1);
  setNumber(n => n + 1);
  setNumber(n => n + 1);
}}>+3</button>
```

**How does this work?**
- Each setNumber(n => n + 1) uses the latest value from the queue.
- So the number goes up by 3, as you expect!

**Analogy:**
- It's like telling the cashier: "Add 1 to my order," three times. The cashier adds them up before sending to the kitchen.

---

## 4. Visual: How React Processes the Queue

| Step | What's in the queue?         | Value |
|------|-----------------------------|-------|
| 1    | n => n + 1                  | 0 → 1 |
| 2    | n => n + 1                  | 1 → 2 |
| 3    | n => n + 1                  | 2 → 3 |

So, after all updates, the number is 3!

---

## 5. Mixing Direct Values and Updater Functions

If you mix direct values and updater functions, the last direct value wins:

```jsx
<button onClick={() => {
  setNumber(number + 5); // sets to 5
  setNumber(n => n + 1); // adds 1
  setNumber(42);         // sets to 42
}}>Update</button>
```

- React will process all updates, but the last one (42) will be the final value.

> **Tip:** If you want to add or change based on the latest value, always use the updater function!

---

## 💡 Recap & Tips

- React waits until your function finishes before updating state (batching).
- If you want to update state many times, use the updater function: setNumber(n => n + 1).
- If you use setNumber(number + 1) many times, it only works once!
- Updater functions are your friend for safe, repeated updates.

---

## 🏋️‍♂️ Practice Challenge (With Hints!)

**Scenario:**
You want a button that adds 5 to a counter, no matter how many times you click it or how fast.

**Hint:** Use the updater function 5 times in a row.

<details>
<summary>Click to see a sample answer</summary>

```jsx
<button onClick={() => {
  setCount(c => c + 1);
  setCount(c => c + 1);
  setCount(c => c + 1);
  setCount(c => c + 1);
  setCount(c => c + 1);
}}>+5</button>
```

</details>

---

## 🔗 Learn More

- [Official React Docs: Queueing a Series of State Updates](https://react.dev/learn/queueing-a-series-of-state-updates)

---

Happy coding! 🚀
