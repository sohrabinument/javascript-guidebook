---
title: State as a Snapshot in React
---

# 🖼️ State as a Snapshot in React

> **React State is like a snapshot in time.**
> When you update state, you're asking React to take a new picture of your UI!

---

## 🎯 What You'll Learn

- How setting state triggers re-renders
- Why state doesn't update immediately
- How event handlers "see" a snapshot of state
- Common mistakes and how to avoid them

---

## 1. Setting State Triggers a Re-render

Imagine your UI is a photo album. Every time you update state, React takes a new photo!

```jsx
import { useState } from 'react';

export default function Form() {
  const [isSent, setIsSent] = useState(false);
  const [message, setMessage] = useState('Hi!');

  if (isSent) {
    return <h1>Your message is on its way!</h1>;
  }

  return (
    <form onSubmit={e => {
      e.preventDefault();
      setIsSent(true);
      sendMessage(message);
    }}>
      <textarea
        placeholder="Message"
        value={message}
        onChange={e => setMessage(e.target.value)}
      />
      <button type="submit">Send</button>
    </form>
  );
}

function sendMessage(message) {
  // Imagine this sends your message!
}
```

**What happens when you click "Send"?**

1. The form submits.
2. `setIsSent(true)` asks React to take a new snapshot.
3. React re-renders the UI with the new state.

---

## 2. Rendering is Like Taking a Snapshot

Think of React as a camera. Every time your component renders, React takes a picture (snapshot) of the state and uses it to build the UI. If you change the state, React takes a new picture and updates the UI to match.

**Analogy:**
- Imagine you're playing a video game. Every time you save your progress, you create a "save point" (snapshot). If you make changes and reload, you go back to that exact moment. React's state works similarly—each render is a save point of your UI.

- **State vs. Regular Variables:**
  - State is managed by React and survives re-renders. Regular variables reset every time your component function runs.

---

## 3. State Updates Are Not Immediate

Let's see a common mistake:

```jsx
<button onClick={() => {
  setNumber(number + 1);
  setNumber(number + 1);
  setNumber(number + 1);
}}>+3</button>
```

**What do you think happens?**  
Even though you call `setNumber(number + 1)` three times, the number only increases by 1!

**Why?**  
Each call uses the same "snapshot" of `number` from this render.

**Tip:**
If you want to update based on the previous value, use the updater function:

```jsx
setNumber(n => n + 1);
setNumber(n => n + 1);
setNumber(n => n + 1);
```
Now, the number will increase by 3!

---

## 4. State Over Time: Async Surprises

```jsx
<button onClick={() => {
  setNumber(number + 5);
  setTimeout(() => {
    alert(number);
  }, 3000);
}}>+5</button>
```

**What will the alert show?**  
It will show the old value, not the updated one!  
Because the event handler "remembers" the state from when it was created.

---

## 👨‍🍳🍽️ Analogy: The Chef and the Waiter

Think of your React component as a **chef** in a restaurant, and the UI as the **waiter** who serves food to the customer.

- The **waiter** (UI) only serves what the **chef** (component) has prepared at that moment (the current state).
- If the chef starts cooking something new (state update), the waiter won't serve it until the chef says, "I'm done!" (the next render).
- Even if the chef changes the recipe halfway, the waiter will only serve what was ready when the order was taken (the snapshot at render time).

**Key point:**
> The UI always shows the "dish" (state) that was ready at the time of the last render, not what the chef is currently cooking!

This is why, if you update state and immediately try to read it, you'll still get the old value—because the new dish isn't ready to serve yet!

---

## 💡 Recap & Tips

- Setting state requests a new render (a new snapshot!)
- State is stored by React, not your function
- Each render gets its own state and event handlers
- State never changes within a render
- Use updater functions if you need the latest state

---

## ❓ FAQ: Common Questions

**Q: Why doesn't my state update immediately after calling setState?**
A: React batches state updates for performance. The new value will be available on the next render.

**Q: Can I use regular variables instead of state?**
A: Regular variables reset on every render. Use state for values you want to keep between renders.

**Q: How do I get the latest state value in async code?**
A: Use the updater function form of setState, or consider using refs for truly persistent values.

---

## 🔗 Learn More

- [Official React Docs: State as a Snapshot](https://react.dev/learn/state-as-a-snapshot)

---

Happy coding! 🚀
